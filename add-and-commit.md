# add & commit | ファイルのコミットログを作成する (★)

## 概要

- `git add FILE` で次のコミットログにFILEを含める
- `git commit` でコミットログを作成する

## 例題 (リポジトリ: [git-drill/add-and-commit](https://github.com/git-drill/add-and-commit))

- [`index.html`](url) の内容に変更を加えた。
- [操作] `index.2.html` を `index.html` としてコピー(上書き)
- 変更内容を履歴として保存したい。

## 例題回答

1. `git status` で次の履歴候補に追加されていない状態の変更(赤字)があることを確認。
2. `git diff` で変更の差分が赤で表示されるのを確認。
3. `git add index.html` で、次のコミットに含める内容に `index.html` の差分を追加する。
4. `git diff` で変更の差分が青で表示されるのを確認。
5. `git commit -m "タイトルとコンテンツを変更"` で、コミットを作成する。
6. `git log` で新しいコミットがコミットログに追加されていることを確認。
7. `git diff` で何も差分が出て来ないことを確認。

## 例題解説

コミットは、git上で1つの変更のまとまりを表す単位です。
ファイルを変更した場合には、 5. `git commit` でその変更をコミットに含め記録することができます。

ただし次のコミットにファイルを含めるかどうかをgitに伝える必要があります。
そこで事前に 3. `git add` コマンドを使って、次のコミットに含めるようgitに指示します。
今回であれば `index.html` の変更を次のコミットに含めることを指示しました。
これは 4. `git diff` をすると 2. `git diff` とは表示上の色が異なることからもわかります。

そして 7. `git diff` で変更した差分が出て来なくなり、無事にコミットが作られたことがわかります。
なおこの例題では1つのファイルの変更でコミットを作成しました。
演習では複数のファイルを変更した場合についても扱いますが、いずれも上記と同じやり方でコミットが作成できます。

なお `git commit -m` で `-m` をなくして `git commit` と入力した場合、コミットメッセージを編集するためのエディタ(vim)が起動します。
vimは他のエディタと異なり特殊なコマンドによる操作が必要になります。
操作方法が分からない人はvimの画面で `:q!` と入力して画面を閉じます。

## 演習

## 演習1

例題の `index.html` に続けて、自分の好きなように変更を加え、例題回答と同じ手順でコミットを繰り返してみましょう。

## 演習2

演習1を繰り返した後、 `git log` で任意の時点のコミットを選び、コミットID(コミットログの先頭に表示される英数字32文字の羅列)の先頭7文字、あるいは全体をコピーします。
コピーした値を `git show (コピーした値)` のように `git show` の後ろにつけて実行してみてください。

## 演習3

任意のファイル(テキストでも画像でもOK)をこのリポジトリに追加して `git status` を実行してみましょう。
また追加前に `git diff` も試してみましょう。
例題回答の1.や2.と何が違うでしょうか?
続けて `git add` 以降の手順も踏んでみましょう、例題回答と何か違いがあったでしょうか?

