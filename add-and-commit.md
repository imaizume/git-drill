# add & commit | ファイルのコミットログを作成する

![概念図](/img/add-and-commit/top.png)

## 難易度 :star:

## 概要

- `git add FILE` で次のコミットログにFILEを含める
- `git commit` でコミットログを作成する

## 例題 (リポジトリ: [git-drill/add-and-commit](https://github.com/git-drill/add-and-commit))

- :computer: [`index.html`](url) の内容に変更を加えた。
  - :white_check_mark: `index.2.html` を `index.html` にコピー(上書き)
- :octocat:​ 変更内容を履歴として保存したい。

## 例題回答

{% youtube src="https://youtu.be/hQ_IIR_pavs" %}{% endyoutube %}

1. git status` で次の履歴候補に追加されていない状態の変更(赤字)があることを確認。
2. `git diff` で変更の差分が赤で表示されるのを確認。
3. `git add index.html` で、次のコミットに含める内容に `index.html` の差分を追加する。
4. `git diff` で変更の差分が青で表示されるのを確認。
5. `git commit -m "タイトルとコンテンツを変更"` で、コミットを作成する。
6. `git log` で新しいコミットがコミットログに追加されていることを確認。
7. `git diff` で何も差分が出て来ないことを確認。

## 例題解説

**コミットは、git上での変更箇所のまとまりです。**
ファイルを変更した場合には、**変更内容を `git commit` コマンドでコミットに記録することができます。**

ただし`git commit`を実行する前に、次のコミットに変更箇所を含めることを事前にgitへ伝える必要があります。
**そこで `git add` コマンドを使って、次のコミットに変更を含めるようgitに指示します。**
**今回は `index.html` に加えた変更を、次のコミットに含めるようを指示しました。**
`git add index.html`を実行する前後で  `git diff` コマンドを実行すると、表示時の色が変わります。
これは`git add`によって変更をコミットに含めることがgitに伝わったこと(緑色になったこと)を表します。

そして `git commit` 後に `git diff` を実行しても変更差分が表示されなくなり、無事にコミットが作成されたことがわかります。
本例題では1ファイルの変更でコミットを作成しましたが、**複数のファイルを変更した場合も同じ方法でコミットが作成できます。**
詳しくは演習問題で試してみましょう。

**なお `git commit -m` を `git commit` (`-m`なし)で実行した場合、コミットメッセージを編集するためのエディタ(vim)が起動します。**
vimは他のエディタと異なり特殊なコマンドによる操作が必要になります。
**操作方法が分からない人はvimの画面で `:q!` と入力して画面を閉じましょう。**

## 演習 (リポジトリ: [git-drill/add-and-commit(例題と同じ)](https://github.com/git-drill/add-and-commit))

## 演習1

例題の `index.html` に続けて、自分の好きなように変更を加え、例題回答と同じ手順でコミットを繰り返してみましょう。

## 演習2

演習1を繰り返した後、 `git log` で任意の時点のコミットを選び、コミットID(コミットログの先頭に表示される英数字32文字の羅列)の先頭7文字、あるいは全体をコピーします。
コピーした値を `git show (コピーした値)` のように `git show` の後ろにつけて実行してみてください。

## 演習3

任意のファイル(テキストでも画像でもOK)をこのリポジトリに追加して `git status` を実行してみましょう。
また追加前に `git diff` も試してみましょう。
例題回答の1.や2.と何が違うでしょうか?
続けて `git add` 以降の手順も踏んでみましょう、例題回答と何か違いがあったでしょうか?

