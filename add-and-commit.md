# add & commit | ファイルのコミットログを作成する

![概念図](/img/add-and-commit/top.png)

## 難易度 :star:

## 概要

- `git add FILE` で次のコミットログにFILEを含める
- `git commit` でコミットログを作成する

## 例題 (リポジトリ: [git-drill/add-and-commit](https://github.com/git-drill/add-and-commit))

- :computer: `list.txt` に `- banana` というテキストを追加した
- :octocat: 変更の内容を履歴として保存したい。

## 例題回答

1. `git status` で、`list.txt` が変更された状態(modified)であることを確認。
2. `git diff` で、変更内容が表示されることを確認。
3. `git add list.txt` で、変更内容を次のコミットに含める。
4. `git diff` で、変更内容が表示されなくなったことを確認。
4. `git diff --staged` で、変更内容が表示されることを確認。
5. `git commit -m "new item: banana"` で、コミットを作成。
6. `git log` で新しいコミットが追加されていることを確認。
7. `git diff` で新しい変更がないことを確認。

## 例題解説

**コミットは、git上での変更箇所のまとまりです。**
ファイルを変更した場合には、**変更内容を `git commit` コマンドでコミットに記録することができます。**

ただし`git commit`を実行する前に、次のコミットに変更箇所を含めることを事前にgitへ伝える必要があります。
**そこで `git add` コマンドを使って、次のコミットに変更を含めるようgitに指示します。**
今回は `list.txt` に加えた変更を、次のコミットに含めるようを指示しました。

**また`git add list.txt`の実行前後で  `git diff` コマンドの結果が異なっています。**
これは`git add`によって、次のコミットに変更を含めることが確定したため、通常の`diff`では表示されなくなったためです。
コミット予定の変更内容を確認したい場合には`git diff --staged`を実行します。

そして `git commit` 後に `git diff` を実行しても変更差分が表示されなくなり、無事にコミットが作成されたことがわかります。
本例題では1ファイルの変更でコミットを作成しましたが、**複数のファイルを変更した場合も同じ方法でコミットが作成できます。**
詳しくは演習問題で試してみましょう。

**なお `git commit -m` を `git commit` (`-m`なし)で実行した場合、コミットメッセージを編集するためのエディタ(vim)が起動します。**
vimは他のエディタと異なり特殊なコマンドによる操作が必要になります。
**操作方法が分からない人はvimの画面で `:q!` と入力して画面を閉じましょう。**

## 演習 (リポジトリ: [git-drill/add-and-commit(例題と同じ)](https://github.com/git-drill/add-and-commit))

## 演習1

例題に続けて `list.txt` に自分の好きなように変更を加え、例題回答と同じ手順でコミットを繰り返してみましょう。

## 演習2

演習1を繰り返した後、 `git log` で任意の時点のコミットを選び、コミットID(コミットログの先頭に表示される英数字32文字の羅列)の先頭7文字、あるいは全体をコピーします。
コピーした値を `git show (コピーした値)` のように `git show` の後ろにつけて実行してみてください。

## 演習3

任意のファイル(テキストでも画像でもOK)をこのリポジトリに追加して `git status` を実行してみましょう。
また追加前に `git diff` も試してみましょう。
例題回答の1.や2.と何が違うでしょうか?
続けて `git add` 以降の手順も踏んでみましょう、例題回答と何か違いがあったでしょうか?

